<!DOCTYPE html>
<html lang="en">
<head>
    <title>Resonant.js Practical Demo</title>
    <script src="../resonant.js"></script>
</head>
<body>
<h1>Resonant.js Practical Demo</h1>

<!-- Display and update a single item -->
<div>
    <h2>Counter</h2>
    <p>
        Current count: <span res="counter"></span>
    </p>
    <div res-conditional="counter < 10">
        Only shows when counter is less than 10
    </div>
    <div res-conditional="counter >= 10">
        Only shows when counter is greater than or equal to 10
    </div>
    <button onclick="counter++">Increment Counter</button>
</div>

<!-- Demonstrate object property binding -->
<div>
    <h2>User Information</h2>
    <div res="user">
        <span res-prop="firstname"></span>
        <span res-prop="lastname"></span>
        <br/>
        <div res-conditional="user.firstname == 'John' && user.lastname == 'Doe'">
            Only shows when firstname is John and lastname is Doe
        </div>
        <br/>
        First Name: <input type="text" res-prop="firstname" />
        Last Name: <input type="text" res-prop="lastname" />
    </div>
</div>

<!-- Demonstrate dynamic list rendering -->
<div>
    <h2>Project Members</h2>
    <ul res="projectTeam">
        <li>
            <span res-prop="name"></span> - <span res-prop="role"></span>
        </li>
    </ul>
    <button onclick="addProjectMember()">Add Project Member</button>
</div>

<script>
    const resonantJs = new Resonant();

    // Initialize a single object with add method
    resonantJs.add("counter", 0);

    // Initialize variables using a configuration object
    resonantJs.addAll({
        user: {
            firstname: "John",
            lastname: "Doe",
            email: ""
        },
        projectTeam: [
            { name: "Alice", role: "Developer" },
            { name: "Bob", role: "Designer" }
        ]
    });

    // Chain together callbacks
    resonantJs.addCallback("user", (user) => {
        console.log(`User updated: ${user.firstname} ${user.lastname}`);
        // You can nest updates within callbacks
        counter++;
    });

    resonantJs.addCallback("counter", (count) => {
        console.log(`Counter updated: ${count}`);
    });

    function addProjectMember() {
        const newMember = { name: "Charlie", role: "Product Manager" };
        projectTeam.push(newMember);
    }
</script>
</body>
</html>
